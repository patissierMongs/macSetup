layout {
  pane_template name="nvim_pane" {
    command "zsh"
    args "-l" "-c" "nvim"
  }
  
  pane_template name="shell_pane" {
    command "zsh"
    args "-l"
  }

  tab name="main" split_direction="vertical" {
    pane name="editor" size="50%" {
      command "zsh"
      args "-l" "-c" "nvim"
    }

    pane split_direction="horizontal" {
      pane name="shell" size="60%" {
        command "zsh"
        args "-l"
      }

      pane split_direction="vertical" {
        pane name="git" size="50%" {
          command "zsh"
          args "-l" "-c" "if git rev-parse --is-inside-work-tree >/dev/null 2>&1; then lazygit; else echo 'Not a git repo - starting shell'; exec zsh -l; fi"
        }

        pane name="monitor" {
          command "zsh"
          args "-l" "-c" "if [ -f ./logs/dev.log ]; then tail -f ./logs/dev.log; elif [ -f ./package.json ]; then echo 'Node.js project detected. Run: npm run dev'; exec zsh -l; else echo 'Monitor pane ready'; exec zsh -l; fi"
        }
      }
    }
  }

  tab name="monitor" split_direction="horizontal" {
    pane name="system" size="50%" {
      command "zsh"
      args "-l" "-c" "if command -v htop >/dev/null; then htop; else top; fi"
    }
    pane name="network" {
      command "zsh"
      args "-l" "-c" "if command -v gping >/dev/null; then gping google.com; elif command -v ping >/dev/null; then ping google.com; else echo 'Network monitoring tools not available'; exec zsh -l; fi"
    }
  }

  tab name="database" split_direction="horizontal" {
    pane name="db-cli" size="70%" {
      command "zsh"
      args "-l" "-c" "echo 'Database CLIs: psql, mysql, redis-cli, sqlite3'; exec zsh -l"
    }
    pane name="db-status" {
      command "zsh"
      args "-l" "-c" "echo 'DB Status Monitor'; if command -v brew >/dev/null; then brew services list | grep -E 'postgres|mysql|redis'; fi; exec zsh -l"
    }
  }

  tab name="scratch" {
    pane name="scratch" {
      command "zsh"
      args "-l"
    }
  }
}
